{"index":{"version":"0.5.12","fields":[{"name":"title","boost":10},{"name":"keywords","boost":15},{"name":"body","boost":1}],"ref":"url","documentStore":{"store":{"markdown/introduce.html":["over","websocket等","websocket，grpc，mqtt等协议用于实时推送","为什么要写这一系列文章","主要内容","写这一系列文章有以下两个方面的原因:","学习一些在工作中没有用到，但是又非常感兴趣的技术，比如mqtt和mqtt","实时推送当中比较常用的发布订阅模式","应用场景总结","总结，将现在一直之前做的东西清晰的表达出来","背景介绍","这一系列文章主要包括以下方面内容:"],"markdown/pub_sub.html":["broker:","broker实现","broker实现也可以简化，只理会topic和subscriber的关系，只推实时数据，尽力而为的推送，这种场景一般对数据准确性要求不是非常严格，推送数据可以丢失，后续通过接口修正回来就行。","broker实现可以很复杂，一方面要维护topic和subscriber的关系，另一方面，有些场景，特别是跟金钱打交道的场景，要考虑消息的不重不漏，消息重复或者消息丢失，可能都会造成资金，结算等问题，都是能让你丢饭碗的活。","code/brok","publisher:","publisher实现","publisher实现可以多种多样，可以长连接，可以http，可以grpc，只要能把消息发送给broker即可，因为publisher负责发布，是主动的，跟broker不一定需要保持连接状态","subscirber实现","subscriber:","subscriber实现比publisher要稍微困难一点，subscriber是消息被动接受者，也就意味着要跟broker保持连接状态，从而能够及时接收到消息，我个人认为从实时推送的角度而言，subscriber和broker之间的通信协议是一项关键的地方，会从以下几个方面进行考虑:","发布者，用于发布消息","发布订阅模式","发布订阅，很多情况下直接称为pub/sub，在日常开发中用的比较多，无论是使用消息中间件还是做一些实时推送相关的服务，基本都用到pub/sub来解决问题。pub/sub模式包含三个角色:","在开始实时推送相关的技术之前，首先要解决实时推送用到的pub/sub相关的代码，这部分代码相对比较独立，写好了之后在后续开发当中集成进去就可以了。这部分代码已经上传到目录","处于publisher和subscriber的消息代理人","多平台，比如web端","实现一个发布订阅的基础模块","实现成本","当中","当然具体情况具体分析","整个模式核心的地方在于broker，broker连接publisher和subscriber，接收publisher发布的消息，并将消息发送给指定的订阅者，这点与生产","流量消耗","消费模式不一样，subscriber并不一定会得到全量的数据，broker只会给subscriber发送其关注的消息","电量消耗","订阅者，关注自己感兴趣的topic"],"markdown/websocket.html":["基于websocket的推送"],"markdown/grpc.html":["基于grpc的推送"],"markdown/mqtt.html":["基于mqtt的推送"],"markdown/tcp.html":["基于tcp的推送"],"./":["grpc","mqtt","tcp","websocket","介绍","在推送相关的协议之前，先详细描述了推送当中的一个设计模式——发布(pub)/订阅(sub)，然后开发了一个各个协议都能通用的pub/sub模块，后续所有协议都可以集成这个模块，专注协议层面的开发。","接着会针对各个协议如何用于推送消息，各个协议实现推送的特点等。","最后介绍各个协议的使用场景，优缺点等","这一系列文章主要包括一些常用的消息推送协议，包括","选择合适的协议"]},"length":7},"tokenStore":{"root":{"docs":{},"o":{"docs":{},"v":{"docs":{},"e":{"docs":{},"r":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}},"w":{"docs":{},"e":{"docs":{},"b":{"docs":{},"s":{"docs":{},"o":{"docs":{},"c":{"docs":{},"k":{"docs":{},"e":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}},"等":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}},"，":{"docs":{},"g":{"docs":{},"r":{"docs":{},"p":{"docs":{},"c":{"docs":{},"，":{"docs":{},"m":{"docs":{},"q":{"docs":{},"t":{"docs":{},"t":{"docs":{},"等":{"docs":{},"协":{"docs":{},"议":{"docs":{},"用":{"docs":{},"于":{"docs":{},"实":{"docs":{},"时":{"docs":{},"推":{"docs":{},"送":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"为":{"docs":{},"什":{"docs":{},"么":{"docs":{},"要":{"docs":{},"写":{"docs":{},"这":{"docs":{},"一":{"docs":{},"系":{"docs":{},"列":{"docs":{},"文":{"docs":{},"章":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}}}}}}},"主":{"docs":{},"要":{"docs":{},"内":{"docs":{},"容":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}},"写":{"docs":{},"这":{"docs":{},"一":{"docs":{},"系":{"docs":{},"列":{"docs":{},"文":{"docs":{},"章":{"docs":{},"有":{"docs":{},"以":{"docs":{},"下":{"docs":{},"两":{"docs":{},"个":{"docs":{},"方":{"docs":{},"面":{"docs":{},"的":{"docs":{},"原":{"docs":{},"因":{"docs":{},":":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}}}}}}}}}}}}}},"学":{"docs":{},"习":{"docs":{},"一":{"docs":{},"些":{"docs":{},"在":{"docs":{},"工":{"docs":{},"作":{"docs":{},"中":{"docs":{},"没":{"docs":{},"有":{"docs":{},"用":{"docs":{},"到":{"docs":{},"，":{"docs":{},"但":{"docs":{},"是":{"docs":{},"又":{"docs":{},"非":{"docs":{},"常":{"docs":{},"感":{"docs":{},"兴":{"docs":{},"趣":{"docs":{},"的":{"docs":{},"技":{"docs":{},"术":{"docs":{},"，":{"docs":{},"比":{"docs":{},"如":{"docs":{},"m":{"docs":{},"q":{"docs":{},"t":{"docs":{},"t":{"docs":{},"和":{"docs":{},"m":{"docs":{},"q":{"docs":{},"t":{"docs":{},"t":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"实":{"docs":{},"时":{"docs":{},"推":{"docs":{},"送":{"docs":{},"当":{"docs":{},"中":{"docs":{},"比":{"docs":{},"较":{"docs":{},"常":{"docs":{},"用":{"docs":{},"的":{"docs":{},"发":{"docs":{},"布":{"docs":{},"订":{"docs":{},"阅":{"docs":{},"模":{"docs":{},"式":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}}}}}}}}}}}},"现":{"docs":{},"一":{"docs":{},"个":{"docs":{},"发":{"docs":{},"布":{"docs":{},"订":{"docs":{},"阅":{"docs":{},"的":{"docs":{},"基":{"docs":{},"础":{"docs":{},"模":{"docs":{},"块":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}},"成":{"docs":{},"本":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}},"应":{"docs":{},"用":{"docs":{},"场":{"docs":{},"景":{"docs":{},"总":{"docs":{},"结":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}},"总":{"docs":{},"结":{"docs":{},"，":{"docs":{},"将":{"docs":{},"现":{"docs":{},"在":{"docs":{},"一":{"docs":{},"直":{"docs":{},"之":{"docs":{},"前":{"docs":{},"做":{"docs":{},"的":{"docs":{},"东":{"docs":{},"西":{"docs":{},"清":{"docs":{},"晰":{"docs":{},"的":{"docs":{},"表":{"docs":{},"达":{"docs":{},"出":{"docs":{},"来":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}}}}}}}}}}}}}}}}},"背":{"docs":{},"景":{"docs":{},"介":{"docs":{},"绍":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":10}}}}}},"这":{"docs":{},"一":{"docs":{},"系":{"docs":{},"列":{"docs":{},"文":{"docs":{},"章":{"docs":{},"主":{"docs":{},"要":{"docs":{},"包":{"docs":{},"括":{"docs":{},"以":{"docs":{},"下":{"docs":{},"方":{"docs":{},"面":{"docs":{},"内":{"docs":{},"容":{"docs":{},":":{"docs":{"markdown/introduce.html":{"ref":"markdown/introduce.html","tf":0.09090909090909091}}}}}}}}},"一":{"docs":{},"些":{"docs":{},"常":{"docs":{},"用":{"docs":{},"的":{"docs":{},"消":{"docs":{},"息":{"docs":{},"推":{"docs":{},"送":{"docs":{},"协":{"docs":{},"议":{"docs":{},"，":{"docs":{},"包":{"docs":{},"括":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}}}}}}}}}}}}}}}}}}}}}}}},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},":":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}},"实":{"docs":{},"现":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}},"也":{"docs":{},"可":{"docs":{},"以":{"docs":{},"简":{"docs":{},"化":{"docs":{},"，":{"docs":{},"只":{"docs":{},"理":{"docs":{},"会":{"docs":{},"t":{"docs":{},"o":{"docs":{},"p":{"docs":{},"i":{"docs":{},"c":{"docs":{},"和":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"的":{"docs":{},"关":{"docs":{},"系":{"docs":{},"，":{"docs":{},"只":{"docs":{},"推":{"docs":{},"实":{"docs":{},"时":{"docs":{},"数":{"docs":{},"据":{"docs":{},"，":{"docs":{},"尽":{"docs":{},"力":{"docs":{},"而":{"docs":{},"为":{"docs":{},"的":{"docs":{},"推":{"docs":{},"送":{"docs":{},"，":{"docs":{},"这":{"docs":{},"种":{"docs":{},"场":{"docs":{},"景":{"docs":{},"一":{"docs":{},"般":{"docs":{},"对":{"docs":{},"数":{"docs":{},"据":{"docs":{},"准":{"docs":{},"确":{"docs":{},"性":{"docs":{},"要":{"docs":{},"求":{"docs":{},"不":{"docs":{},"是":{"docs":{},"非":{"docs":{},"常":{"docs":{},"严":{"docs":{},"格":{"docs":{},"，":{"docs":{},"推":{"docs":{},"送":{"docs":{},"数":{"docs":{},"据":{"docs":{},"可":{"docs":{},"以":{"docs":{},"丢":{"docs":{},"失":{"docs":{},"，":{"docs":{},"后":{"docs":{},"续":{"docs":{},"通":{"docs":{},"过":{"docs":{},"接":{"docs":{},"口":{"docs":{},"修":{"docs":{},"正":{"docs":{},"回":{"docs":{},"来":{"docs":{},"就":{"docs":{},"行":{"docs":{},"。":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"可":{"docs":{},"以":{"docs":{},"很":{"docs":{},"复":{"docs":{},"杂":{"docs":{},"，":{"docs":{},"一":{"docs":{},"方":{"docs":{},"面":{"docs":{},"要":{"docs":{},"维":{"docs":{},"护":{"docs":{},"t":{"docs":{},"o":{"docs":{},"p":{"docs":{},"i":{"docs":{},"c":{"docs":{},"和":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"的":{"docs":{},"关":{"docs":{},"系":{"docs":{},"，":{"docs":{},"另":{"docs":{},"一":{"docs":{},"方":{"docs":{},"面":{"docs":{},"，":{"docs":{},"有":{"docs":{},"些":{"docs":{},"场":{"docs":{},"景":{"docs":{},"，":{"docs":{},"特":{"docs":{},"别":{"docs":{},"是":{"docs":{},"跟":{"docs":{},"金":{"docs":{},"钱":{"docs":{},"打":{"docs":{},"交":{"docs":{},"道":{"docs":{},"的":{"docs":{},"场":{"docs":{},"景":{"docs":{},"，":{"docs":{},"要":{"docs":{},"考":{"docs":{},"虑":{"docs":{},"消":{"docs":{},"息":{"docs":{},"的":{"docs":{},"不":{"docs":{},"重":{"docs":{},"不":{"docs":{},"漏":{"docs":{},"，":{"docs":{},"消":{"docs":{},"息":{"docs":{},"重":{"docs":{},"复":{"docs":{},"或":{"docs":{},"者":{"docs":{},"消":{"docs":{},"息":{"docs":{},"丢":{"docs":{},"失":{"docs":{},"，":{"docs":{},"可":{"docs":{},"能":{"docs":{},"都":{"docs":{},"会":{"docs":{},"造":{"docs":{},"成":{"docs":{},"资":{"docs":{},"金":{"docs":{},"，":{"docs":{},"结":{"docs":{},"算":{"docs":{},"等":{"docs":{},"问":{"docs":{},"题":{"docs":{},"，":{"docs":{},"都":{"docs":{},"是":{"docs":{},"能":{"docs":{},"让":{"docs":{},"你":{"docs":{},"丢":{"docs":{},"饭":{"docs":{},"碗":{"docs":{},"的":{"docs":{},"活":{"docs":{},"。":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"c":{"docs":{},"o":{"docs":{},"d":{"docs":{},"e":{"docs":{},"/":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"l":{"docs":{},"i":{"docs":{},"s":{"docs":{},"h":{"docs":{},"e":{"docs":{},"r":{"docs":{},":":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}},"实":{"docs":{},"现":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}},"可":{"docs":{},"以":{"docs":{},"多":{"docs":{},"种":{"docs":{},"多":{"docs":{},"样":{"docs":{},"，":{"docs":{},"可":{"docs":{},"以":{"docs":{},"长":{"docs":{},"连":{"docs":{},"接":{"docs":{},"，":{"docs":{},"可":{"docs":{},"以":{"docs":{},"h":{"docs":{},"t":{"docs":{},"t":{"docs":{},"p":{"docs":{},"，":{"docs":{},"可":{"docs":{},"以":{"docs":{},"g":{"docs":{},"r":{"docs":{},"p":{"docs":{},"c":{"docs":{},"，":{"docs":{},"只":{"docs":{},"要":{"docs":{},"能":{"docs":{},"把":{"docs":{},"消":{"docs":{},"息":{"docs":{},"发":{"docs":{},"送":{"docs":{},"给":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"即":{"docs":{},"可":{"docs":{},"，":{"docs":{},"因":{"docs":{},"为":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"l":{"docs":{},"i":{"docs":{},"s":{"docs":{},"h":{"docs":{},"e":{"docs":{},"r":{"docs":{},"负":{"docs":{},"责":{"docs":{},"发":{"docs":{},"布":{"docs":{},"，":{"docs":{},"是":{"docs":{},"主":{"docs":{},"动":{"docs":{},"的":{"docs":{},"，":{"docs":{},"跟":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"不":{"docs":{},"一":{"docs":{},"定":{"docs":{},"需":{"docs":{},"要":{"docs":{},"保":{"docs":{},"持":{"docs":{},"连":{"docs":{},"接":{"docs":{},"状":{"docs":{},"态":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"i":{"docs":{},"r":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"实":{"docs":{},"现":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},":":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}},"实":{"docs":{},"现":{"docs":{},"比":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"l":{"docs":{},"i":{"docs":{},"s":{"docs":{},"h":{"docs":{},"e":{"docs":{},"r":{"docs":{},"要":{"docs":{},"稍":{"docs":{},"微":{"docs":{},"困":{"docs":{},"难":{"docs":{},"一":{"docs":{},"点":{"docs":{},"，":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"是":{"docs":{},"消":{"docs":{},"息":{"docs":{},"被":{"docs":{},"动":{"docs":{},"接":{"docs":{},"受":{"docs":{},"者":{"docs":{},"，":{"docs":{},"也":{"docs":{},"就":{"docs":{},"意":{"docs":{},"味":{"docs":{},"着":{"docs":{},"要":{"docs":{},"跟":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"保":{"docs":{},"持":{"docs":{},"连":{"docs":{},"接":{"docs":{},"状":{"docs":{},"态":{"docs":{},"，":{"docs":{},"从":{"docs":{},"而":{"docs":{},"能":{"docs":{},"够":{"docs":{},"及":{"docs":{},"时":{"docs":{},"接":{"docs":{},"收":{"docs":{},"到":{"docs":{},"消":{"docs":{},"息":{"docs":{},"，":{"docs":{},"我":{"docs":{},"个":{"docs":{},"人":{"docs":{},"认":{"docs":{},"为":{"docs":{},"从":{"docs":{},"实":{"docs":{},"时":{"docs":{},"推":{"docs":{},"送":{"docs":{},"的":{"docs":{},"角":{"docs":{},"度":{"docs":{},"而":{"docs":{},"言":{"docs":{},"，":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"和":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"之":{"docs":{},"间":{"docs":{},"的":{"docs":{},"通":{"docs":{},"信":{"docs":{},"协":{"docs":{},"议":{"docs":{},"是":{"docs":{},"一":{"docs":{},"项":{"docs":{},"关":{"docs":{},"键":{"docs":{},"的":{"docs":{},"地":{"docs":{},"方":{"docs":{},"，":{"docs":{},"会":{"docs":{},"从":{"docs":{},"以":{"docs":{},"下":{"docs":{},"几":{"docs":{},"个":{"docs":{},"方":{"docs":{},"面":{"docs":{},"进":{"docs":{},"行":{"docs":{},"考":{"docs":{},"虑":{"docs":{},":":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"发":{"docs":{},"布":{"docs":{},"者":{"docs":{},"，":{"docs":{},"用":{"docs":{},"于":{"docs":{},"发":{"docs":{},"布":{"docs":{},"消":{"docs":{},"息":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}},"订":{"docs":{},"阅":{"docs":{},"模":{"docs":{},"式":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":10.038461538461538}}}},"，":{"docs":{},"很":{"docs":{},"多":{"docs":{},"情":{"docs":{},"况":{"docs":{},"下":{"docs":{},"直":{"docs":{},"接":{"docs":{},"称":{"docs":{},"为":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"/":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"，":{"docs":{},"在":{"docs":{},"日":{"docs":{},"常":{"docs":{},"开":{"docs":{},"发":{"docs":{},"中":{"docs":{},"用":{"docs":{},"的":{"docs":{},"比":{"docs":{},"较":{"docs":{},"多":{"docs":{},"，":{"docs":{},"无":{"docs":{},"论":{"docs":{},"是":{"docs":{},"使":{"docs":{},"用":{"docs":{},"消":{"docs":{},"息":{"docs":{},"中":{"docs":{},"间":{"docs":{},"件":{"docs":{},"还":{"docs":{},"是":{"docs":{},"做":{"docs":{},"一":{"docs":{},"些":{"docs":{},"实":{"docs":{},"时":{"docs":{},"推":{"docs":{},"送":{"docs":{},"相":{"docs":{},"关":{"docs":{},"的":{"docs":{},"服":{"docs":{},"务":{"docs":{},"，":{"docs":{},"基":{"docs":{},"本":{"docs":{},"都":{"docs":{},"用":{"docs":{},"到":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"/":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"来":{"docs":{},"解":{"docs":{},"决":{"docs":{},"问":{"docs":{},"题":{"docs":{},"。":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"/":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"模":{"docs":{},"式":{"docs":{},"包":{"docs":{},"含":{"docs":{},"三":{"docs":{},"个":{"docs":{},"角":{"docs":{},"色":{"docs":{},":":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"在":{"docs":{},"开":{"docs":{},"始":{"docs":{},"实":{"docs":{},"时":{"docs":{},"推":{"docs":{},"送":{"docs":{},"相":{"docs":{},"关":{"docs":{},"的":{"docs":{},"技":{"docs":{},"术":{"docs":{},"之":{"docs":{},"前":{"docs":{},"，":{"docs":{},"首":{"docs":{},"先":{"docs":{},"要":{"docs":{},"解":{"docs":{},"决":{"docs":{},"实":{"docs":{},"时":{"docs":{},"推":{"docs":{},"送":{"docs":{},"用":{"docs":{},"到":{"docs":{},"的":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"/":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"相":{"docs":{},"关":{"docs":{},"的":{"docs":{},"代":{"docs":{},"码":{"docs":{},"，":{"docs":{},"这":{"docs":{},"部":{"docs":{},"分":{"docs":{},"代":{"docs":{},"码":{"docs":{},"相":{"docs":{},"对":{"docs":{},"比":{"docs":{},"较":{"docs":{},"独":{"docs":{},"立":{"docs":{},"，":{"docs":{},"写":{"docs":{},"好":{"docs":{},"了":{"docs":{},"之":{"docs":{},"后":{"docs":{},"在":{"docs":{},"后":{"docs":{},"续":{"docs":{},"开":{"docs":{},"发":{"docs":{},"当":{"docs":{},"中":{"docs":{},"集":{"docs":{},"成":{"docs":{},"进":{"docs":{},"去":{"docs":{},"就":{"docs":{},"可":{"docs":{},"以":{"docs":{},"了":{"docs":{},"。":{"docs":{},"这":{"docs":{},"部":{"docs":{},"分":{"docs":{},"代":{"docs":{},"码":{"docs":{},"已":{"docs":{},"经":{"docs":{},"上":{"docs":{},"传":{"docs":{},"到":{"docs":{},"目":{"docs":{},"录":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"推":{"docs":{},"送":{"docs":{},"相":{"docs":{},"关":{"docs":{},"的":{"docs":{},"协":{"docs":{},"议":{"docs":{},"之":{"docs":{},"前":{"docs":{},"，":{"docs":{},"先":{"docs":{},"详":{"docs":{},"细":{"docs":{},"描":{"docs":{},"述":{"docs":{},"了":{"docs":{},"推":{"docs":{},"送":{"docs":{},"当":{"docs":{},"中":{"docs":{},"的":{"docs":{},"一":{"docs":{},"个":{"docs":{},"设":{"docs":{},"计":{"docs":{},"模":{"docs":{},"式":{"docs":{},"—":{"docs":{},"—":{"docs":{},"发":{"docs":{},"布":{"docs":{},"(":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},")":{"docs":{},"/":{"docs":{},"订":{"docs":{},"阅":{"docs":{},"(":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},")":{"docs":{},"，":{"docs":{},"然":{"docs":{},"后":{"docs":{},"开":{"docs":{},"发":{"docs":{},"了":{"docs":{},"一":{"docs":{},"个":{"docs":{},"各":{"docs":{},"个":{"docs":{},"协":{"docs":{},"议":{"docs":{},"都":{"docs":{},"能":{"docs":{},"通":{"docs":{},"用":{"docs":{},"的":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"/":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"模":{"docs":{},"块":{"docs":{},"，":{"docs":{},"后":{"docs":{},"续":{"docs":{},"所":{"docs":{},"有":{"docs":{},"协":{"docs":{},"议":{"docs":{},"都":{"docs":{},"可":{"docs":{},"以":{"docs":{},"集":{"docs":{},"成":{"docs":{},"这":{"docs":{},"个":{"docs":{},"模":{"docs":{},"块":{"docs":{},"，":{"docs":{},"专":{"docs":{},"注":{"docs":{},"协":{"docs":{},"议":{"docs":{},"层":{"docs":{},"面":{"docs":{},"的":{"docs":{},"开":{"docs":{},"发":{"docs":{},"。":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"处":{"docs":{},"于":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"l":{"docs":{},"i":{"docs":{},"s":{"docs":{},"h":{"docs":{},"e":{"docs":{},"r":{"docs":{},"和":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"的":{"docs":{},"消":{"docs":{},"息":{"docs":{},"代":{"docs":{},"理":{"docs":{},"人":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"多":{"docs":{},"平":{"docs":{},"台":{"docs":{},"，":{"docs":{},"比":{"docs":{},"如":{"docs":{},"w":{"docs":{},"e":{"docs":{},"b":{"docs":{},"端":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}},"当":{"docs":{},"中":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}},"然":{"docs":{},"具":{"docs":{},"体":{"docs":{},"情":{"docs":{},"况":{"docs":{},"具":{"docs":{},"体":{"docs":{},"分":{"docs":{},"析":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}},"整":{"docs":{},"个":{"docs":{},"模":{"docs":{},"式":{"docs":{},"核":{"docs":{},"心":{"docs":{},"的":{"docs":{},"地":{"docs":{},"方":{"docs":{},"在":{"docs":{},"于":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"，":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"连":{"docs":{},"接":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"l":{"docs":{},"i":{"docs":{},"s":{"docs":{},"h":{"docs":{},"e":{"docs":{},"r":{"docs":{},"和":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"，":{"docs":{},"接":{"docs":{},"收":{"docs":{},"p":{"docs":{},"u":{"docs":{},"b":{"docs":{},"l":{"docs":{},"i":{"docs":{},"s":{"docs":{},"h":{"docs":{},"e":{"docs":{},"r":{"docs":{},"发":{"docs":{},"布":{"docs":{},"的":{"docs":{},"消":{"docs":{},"息":{"docs":{},"，":{"docs":{},"并":{"docs":{},"将":{"docs":{},"消":{"docs":{},"息":{"docs":{},"发":{"docs":{},"送":{"docs":{},"给":{"docs":{},"指":{"docs":{},"定":{"docs":{},"的":{"docs":{},"订":{"docs":{},"阅":{"docs":{},"者":{"docs":{},"，":{"docs":{},"这":{"docs":{},"点":{"docs":{},"与":{"docs":{},"生":{"docs":{},"产":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"流":{"docs":{},"量":{"docs":{},"消":{"docs":{},"耗":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}},"消":{"docs":{},"费":{"docs":{},"模":{"docs":{},"式":{"docs":{},"不":{"docs":{},"一":{"docs":{},"样":{"docs":{},"，":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"并":{"docs":{},"不":{"docs":{},"一":{"docs":{},"定":{"docs":{},"会":{"docs":{},"得":{"docs":{},"到":{"docs":{},"全":{"docs":{},"量":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"，":{"docs":{},"b":{"docs":{},"r":{"docs":{},"o":{"docs":{},"k":{"docs":{},"e":{"docs":{},"r":{"docs":{},"只":{"docs":{},"会":{"docs":{},"给":{"docs":{},"s":{"docs":{},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"发":{"docs":{},"送":{"docs":{},"其":{"docs":{},"关":{"docs":{},"注":{"docs":{},"的":{"docs":{},"消":{"docs":{},"息":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"电":{"docs":{},"量":{"docs":{},"消":{"docs":{},"耗":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}},"订":{"docs":{},"阅":{"docs":{},"者":{"docs":{},"，":{"docs":{},"关":{"docs":{},"注":{"docs":{},"自":{"docs":{},"己":{"docs":{},"感":{"docs":{},"兴":{"docs":{},"趣":{"docs":{},"的":{"docs":{},"t":{"docs":{},"o":{"docs":{},"p":{"docs":{},"i":{"docs":{},"c":{"docs":{"markdown/pub_sub.html":{"ref":"markdown/pub_sub.html","tf":0.038461538461538464}}}}}}}}}}}}}}}}}}},"基":{"docs":{},"于":{"docs":{},"w":{"docs":{},"e":{"docs":{},"b":{"docs":{},"s":{"docs":{},"o":{"docs":{},"c":{"docs":{},"k":{"docs":{},"e":{"docs":{},"t":{"docs":{},"的":{"docs":{},"推":{"docs":{},"送":{"docs":{"markdown/websocket.html":{"ref":"markdown/websocket.html","tf":11}}}}}}}}}}}}}},"g":{"docs":{},"r":{"docs":{},"p":{"docs":{},"c":{"docs":{},"的":{"docs":{},"推":{"docs":{},"送":{"docs":{"markdown/grpc.html":{"ref":"markdown/grpc.html","tf":11}}}}}}}}},"m":{"docs":{},"q":{"docs":{},"t":{"docs":{},"t":{"docs":{},"的":{"docs":{},"推":{"docs":{},"送":{"docs":{"markdown/mqtt.html":{"ref":"markdown/mqtt.html","tf":11}}}}}}}}},"t":{"docs":{},"c":{"docs":{},"p":{"docs":{},"的":{"docs":{},"推":{"docs":{},"送":{"docs":{"markdown/tcp.html":{"ref":"markdown/tcp.html","tf":11}}}}}}}}}},"g":{"docs":{},"r":{"docs":{},"p":{"docs":{},"c":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}}}},"m":{"docs":{},"q":{"docs":{},"t":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}}}},"t":{"docs":{},"c":{"docs":{},"p":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}}},"介":{"docs":{},"绍":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}},"接":{"docs":{},"着":{"docs":{},"会":{"docs":{},"针":{"docs":{},"对":{"docs":{},"各":{"docs":{},"个":{"docs":{},"协":{"docs":{},"议":{"docs":{},"如":{"docs":{},"何":{"docs":{},"用":{"docs":{},"于":{"docs":{},"推":{"docs":{},"送":{"docs":{},"消":{"docs":{},"息":{"docs":{},"，":{"docs":{},"各":{"docs":{},"个":{"docs":{},"协":{"docs":{},"议":{"docs":{},"实":{"docs":{},"现":{"docs":{},"推":{"docs":{},"送":{"docs":{},"的":{"docs":{},"特":{"docs":{},"点":{"docs":{},"等":{"docs":{},"。":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"最":{"docs":{},"后":{"docs":{},"介":{"docs":{},"绍":{"docs":{},"各":{"docs":{},"个":{"docs":{},"协":{"docs":{},"议":{"docs":{},"的":{"docs":{},"使":{"docs":{},"用":{"docs":{},"场":{"docs":{},"景":{"docs":{},"，":{"docs":{},"优":{"docs":{},"缺":{"docs":{},"点":{"docs":{},"等":{"docs":{"./":{"ref":"./","tf":0.1111111111111111}}}}}}}}}}}}}}}}}}}},"选":{"docs":{},"择":{"docs":{},"合":{"docs":{},"适":{"docs":{},"的":{"docs":{},"协":{"docs":{},"议":{"docs":{"./":{"ref":"./","tf":10}}}}}}}}}},"length":52},"corpusTokens":["broker:","broker实现","broker实现也可以简化，只理会topic和subscriber的关系，只推实时数据，尽力而为的推送，这种场景一般对数据准确性要求不是非常严格，推送数据可以丢失，后续通过接口修正回来就行。","broker实现可以很复杂，一方面要维护topic和subscriber的关系，另一方面，有些场景，特别是跟金钱打交道的场景，要考虑消息的不重不漏，消息重复或者消息丢失，可能都会造成资金，结算等问题，都是能让你丢饭碗的活。","code/brok","grpc","mqtt","over","publisher:","publisher实现","publisher实现可以多种多样，可以长连接，可以http，可以grpc，只要能把消息发送给broker即可，因为publisher负责发布，是主动的，跟broker不一定需要保持连接状态","subscirber实现","subscriber:","subscriber实现比publisher要稍微困难一点，subscriber是消息被动接受者，也就意味着要跟broker保持连接状态，从而能够及时接收到消息，我个人认为从实时推送的角度而言，subscriber和broker之间的通信协议是一项关键的地方，会从以下几个方面进行考虑:","tcp","websocket","websocket等","websocket，grpc，mqtt等协议用于实时推送","为什么要写这一系列文章","主要内容","介绍","写这一系列文章有以下两个方面的原因:","发布者，用于发布消息","发布订阅模式","发布订阅，很多情况下直接称为pub/sub，在日常开发中用的比较多，无论是使用消息中间件还是做一些实时推送相关的服务，基本都用到pub/sub来解决问题。pub/sub模式包含三个角色:","在开始实时推送相关的技术之前，首先要解决实时推送用到的pub/sub相关的代码，这部分代码相对比较独立，写好了之后在后续开发当中集成进去就可以了。这部分代码已经上传到目录","在推送相关的协议之前，先详细描述了推送当中的一个设计模式——发布(pub)/订阅(sub)，然后开发了一个各个协议都能通用的pub/sub模块，后续所有协议都可以集成这个模块，专注协议层面的开发。","基于grpc的推送","基于mqtt的推送","基于tcp的推送","基于websocket的推送","处于publisher和subscriber的消息代理人","多平台，比如web端","学习一些在工作中没有用到，但是又非常感兴趣的技术，比如mqtt和mqtt","实时推送当中比较常用的发布订阅模式","实现一个发布订阅的基础模块","实现成本","应用场景总结","当中","当然具体情况具体分析","总结，将现在一直之前做的东西清晰的表达出来","接着会针对各个协议如何用于推送消息，各个协议实现推送的特点等。","整个模式核心的地方在于broker，broker连接publisher和subscriber，接收publisher发布的消息，并将消息发送给指定的订阅者，这点与生产","最后介绍各个协议的使用场景，优缺点等","流量消耗","消费模式不一样，subscriber并不一定会得到全量的数据，broker只会给subscriber发送其关注的消息","电量消耗","背景介绍","订阅者，关注自己感兴趣的topic","这一系列文章主要包括一些常用的消息推送协议，包括","这一系列文章主要包括以下方面内容:","选择合适的协议"],"pipeline":["stopWordFilter","stemmer"]},"store":{"markdown/introduce.html":{"url":"markdown/introduce.html","title":"背景介绍","keywords":"","body":"为什么要写这一系列文章\n写这一系列文章有以下两个方面的原因:\n\n总结，将现在一直之前做的东西清晰的表达出来\n学习一些在工作中没有用到，但是又非常感兴趣的技术，比如mqtt和mqtt over websocket等\n\n主要内容\n这一系列文章主要包括以下方面内容:\n\n实时推送当中比较常用的发布订阅模式\nwebsocket，grpc，mqtt等协议用于实时推送\n应用场景总结\n\n"},"markdown/pub_sub.html":{"url":"markdown/pub_sub.html","title":"发布订阅模式","keywords":"","body":"发布订阅模式\n发布订阅，很多情况下直接称为pub/sub，在日常开发中用的比较多，无论是使用消息中间件还是做一些实时推送相关的服务，基本都用到pub/sub来解决问题。pub/sub模式包含三个角色:\n\npublisher: 发布者，用于发布消息\nsubscriber: 订阅者，关注自己感兴趣的topic\nbroker: 处于publisher和subscriber的消息代理人\n\n整个模式核心的地方在于broker，broker连接publisher和subscriber，接收publisher发布的消息，并将消息发送给指定的订阅者，这点与生产-消费模式不一样，subscriber并不一定会得到全量的数据，broker只会给subscriber发送其关注的消息\npublisher实现\npublisher实现可以多种多样，可以长连接，可以http，可以grpc，只要能把消息发送给broker即可，因为publisher负责发布，是主动的，跟broker不一定需要保持连接状态\nsubscirber实现\nsubscriber实现比publisher要稍微困难一点，subscriber是消息被动接受者，也就意味着要跟broker保持连接状态，从而能够及时接收到消息，我个人认为从实时推送的角度而言，subscriber和broker之间的通信协议是一项关键的地方，会从以下几个方面进行考虑:\n\n实现成本\n流量消耗\n电量消耗\n多平台，比如web端\n\n当然具体情况具体分析\nbroker实现\nbroker实现可以很复杂，一方面要维护topic和subscriber的关系，另一方面，有些场景，特别是跟金钱打交道的场景，要考虑消息的不重不漏，消息重复或者消息丢失，可能都会造成资金，结算等问题，都是能让你丢饭碗的活。\nbroker实现也可以简化，只理会topic和subscriber的关系，只推实时数据，尽力而为的推送，这种场景一般对数据准确性要求不是非常严格，推送数据可以丢失，后续通过接口修正回来就行。\n实现一个发布订阅的基础模块\n在开始实时推送相关的技术之前，首先要解决实时推送用到的pub/sub相关的代码，这部分代码相对比较独立，写好了之后在后续开发当中集成进去就可以了。这部分代码已经上传到目录 code/broker 当中\n"},"markdown/websocket.html":{"url":"markdown/websocket.html","title":"基于websocket的推送","keywords":"","body":"基于websocket的推送\n"},"markdown/grpc.html":{"url":"markdown/grpc.html","title":"基于grpc的推送","keywords":"","body":"基于grpc的推送\n"},"markdown/mqtt.html":{"url":"markdown/mqtt.html","title":"基于mqtt的推送","keywords":"","body":"基于mqtt的推送\n"},"markdown/tcp.html":{"url":"markdown/tcp.html","title":"基于tcp的推送","keywords":"","body":"基于tcp的推送\n"},"./":{"url":"./","title":"选择合适的协议","keywords":"","body":"介绍\n这一系列文章主要包括一些常用的消息推送协议，包括\n\nwebsocket\ngrpc\nmqtt\ntcp \n\n在推送相关的协议之前，先详细描述了推送当中的一个设计模式——发布(pub)/订阅(sub)，然后开发了一个各个协议都能通用的pub/sub模块，后续所有协议都可以集成这个模块，专注协议层面的开发。\n接着会针对各个协议如何用于推送消息，各个协议实现推送的特点等。\n最后介绍各个协议的使用场景，优缺点等\n"}}}